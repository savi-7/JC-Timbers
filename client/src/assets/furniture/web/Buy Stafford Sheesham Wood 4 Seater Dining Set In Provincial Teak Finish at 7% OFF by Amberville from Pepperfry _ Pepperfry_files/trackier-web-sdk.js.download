!function(t,e){var o="click_id",r="__tr_clid",n="__tr_gclid",a="tr_utm_camp",c="__tr_utms",i="__tr_utmd",u="__tr_isnu",s="__tr_db",p="__tr_jr",l="__tr_luptv",m="session_store",d=function(){try{let e=t.location.hostname.split(".");return e.length>2?e.slice(-2).join("."):t.location.hostname}catch(e){return t.location&&t.location.hostname?t.location.hostname:""}}(),f=function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){var o,r,n,a,c,i,u,s="",p=0;for(e=function(t){var e,o,r="";for(t=t.replace(/\r\n/g,"\n"),o=0;o<t.length;o++)(e=t.charCodeAt(o))<128?r+=String.fromCharCode(e):e>127&&e<2048?(r+=String.fromCharCode(e>>6|192),r+=String.fromCharCode(63&e|128)):(r+=String.fromCharCode(e>>12|224),r+=String.fromCharCode(e>>6&63|128),r+=String.fromCharCode(63&e|128));return r}(e);p<e.length;)a=(o=e.charCodeAt(p++))>>2,c=(3&o)<<4|(r=e.charCodeAt(p++))>>4,i=(15&r)<<2|(n=e.charCodeAt(p++))>>6,u=63&n,isNaN(r)?i=u=64:isNaN(n)&&(u=64),s+=t.charAt(a),s+=t.charAt(c),s+=t.charAt(i),s+=t.charAt(u);return s},decode:function(e){var o,r,n,a,c,i,u="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)o=t.indexOf(e.charAt(s++))<<2|(a=t.indexOf(e.charAt(s++)))>>4,r=(15&a)<<4|(c=t.indexOf(e.charAt(s++)))>>2,n=(3&c)<<6|(i=t.indexOf(e.charAt(s++))),u+=String.fromCharCode(o),64!==c&&(u+=String.fromCharCode(r)),64!==i&&(u+=String.fromCharCode(n));return function(t){for(var e="",o=0,r=0,n=0,a=0;o<t.length;)(r=t.charCodeAt(o))<128?(e+=String.fromCharCode(r),o++):r>191&&r<224?(n=t.charCodeAt(o+1),e+=String.fromCharCode((31&r)<<6|63&n),o+=2):(n=t.charCodeAt(o+1),a=t.charCodeAt(o+2),e+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&a),o+=3);return e}(u)}}}();function h(t,e){return"string"!=typeof t&&(t=String(t)),("number"!=typeof e||e<0)&&(e=100),t.length<=e?t:t.slice(0,e)}function g(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function _(){return t.localStorage?t.localStorage.getItem(s)==m:v(s)==m}function y(e){if(_())return t.sessionStorage?t.sessionStorage.getItem(e):"";var o=v(e);return!o&&t.localStorage&&(o=t.localStorage.getItem(e)),o}function v(t){var o=e.cookie.split("; "),r=null;return o.forEach(function(e){if(0===e.indexOf(t+"="))return r=e.split("=")[1],!1}),r}function S(t){var e=[];["sub1","sub2","sub3","sub4","sub5","sub6","sub7","sub8","sub9","sub10","sub11","sub12","sub13","sub14","sub15","user_id","txn_id","goal_value","goal_id","status","coupon_code","currency","product_id","product_sku","product_quantity","product_cat","product_brand","product_name","is_new_user","store_name","season","order_date","shopify_shop_id"].forEach(function(o){var r=t&&t[o]||"";(r&&"string"==typeof r||r&&"number"==typeof r)&&e.push(o+"="+encodeURIComponent(r))});var o={};o[c]="utms",o[i]="utmd",o[a]="utmc",o[p]="j",[c,i,a,p].forEach(function(t){var r=y(t);r&&"string"==typeof r&&e.push(o[t]+"="+encodeURIComponent(r))});let r=y(n);return r&&e.push("gclid="+r),b(e,t,"sale_amount"),b(e,t,"payout"),b(e,t,"revenue"),e.push("__v=6.6"),e.push("s=websdk"),e}function b(t,e,o){let r=e?e[o]:null;if("string"==typeof r){r=r.replace(/,/g,"");const e=Number(r);isNaN(e)||t.push(`${o}=${e}`)}else"number"==typeof r&&t.push(`${o}=${r}`)}function k(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function C(e,o,r,n){t.Sentry.captureException(e,function(e){return e.clear(),o&&e.setExtra("tdomain",o),r&&e.setExtra("token",r),n&&e.setExtra("opts",JSON.stringify(n)),e.setExtra("href",t.location.href),e.setExtra("user_agent",navigator.userAgent),e})}function I(o,r,n,a){if(t.Sentry)t.Sentry&&"6.19.7"==t.Sentry.SDK_VERSION&&C(o,r,n,a);else{var c=e.createElement("script");c.onload=function(){t.Sentry.init({dsn:"https://6e98a7359b29fa1e566c00f891e415c9@o156739.ingest.sentry.io/4506630567100416",defaultIntegrations:!1}),C(o,r,n,a)},c.src="https://browser.sentry-cdn.com/6.19.7/bundle.min.js",e.body.appendChild(c)}}function x(t,e,o){if(o.debug||"kama.gotrackier.com"==t||"koskii.gotrackier.com"==t||"neemans17.gotrackier.com"==t){var r=S(o).join("&"),n=j(),a=o&&o.is_camp;fetch("https://logs.cloudstuff.tech/?"+(a?"adid":"av")+"="+e+"&"+r+"&click_id="+n).then(function(t){}).catch(function(r){console.log("[log.ERROR TrackierWebSDK] Additional logging failed"),I(r,t,e,o)})}}function w(o,r,n){var a=n&&n.is_iframe||n&&n.isIframe?"iframe":"image",c=n&&n.order_date||"";if(!c&&t.Shopify&&t.Shopify.checkout&&(c=t.Shopify.checkout.updated_at||t.Shopify.checkout.created_at),c&&n&&(n.order_date=c,!function(t){try{var e=new Date(t);if(!e.toJSON())return!0;var o=new Date;return k(o)==k(e)&&(o.getTime()-e.getTime())/1e3<86400}catch(t){return!0}}(c)))console.log("[log.INFO TrackierWebSDK] Skip order tracking as it is not of current date");else{var i=S(n).join("&"),u=j(),s="https://"+o+"/pixel?"+(n&&n.is_camp?"adid":"av")+"="+r+"&"+i+"&click_id="+u;if("iframe"==a){var p=e.createElement("iframe");p.setAttribute("src",s),p.style.display="none",e.body.appendChild(p)}else{(new Image).src=s}}}function T(t,e,o){try{w(t,e,o)}catch(r){o&&o.capture_error&&I(r,t,e,o)}}function A(){var t=new Date;J(l,t.getTime())}function D(p,l){var f=g("utm_source");if(function(){var t=e.referrer,o=g("gclid"),r=g("fbclid");return/^https:\/\/www\.google\./.test(t)||"https://www.google.com/"==t||"https://www.bing.com/"==t||"https://search.yahoo.com/"==t||"https://in.search.yahoo.com/"==t||/search\.yahoo\.com/.test(t)||"string"==typeof o&&o.length>10||"string"==typeof r&&r.length>10}()&&!f)return e.cookie=o+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+d,e.cookie=r+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+d,e.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+d,e.cookie=a+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+d,e.cookie=c+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+d,e.cookie=i+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+d,e.cookie=u+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+d,t.sessionStorage&&(t.sessionStorage.removeItem(o),t.sessionStorage.removeItem(r),t.sessionStorage.removeItem(n),t.sessionStorage.removeItem(a),t.sessionStorage.removeItem(c),t.sessionStorage.removeItem(i),t.sessionStorage.removeItem(u)),t.localStorage&&(t.localStorage.removeItem(o),t.localStorage.removeItem(r),t.localStorage.removeItem(n),t.localStorage.removeItem(a),t.localStorage.removeItem(c),t.localStorage.removeItem(i),t.localStorage.removeItem(u)),O("organic"),void A();t.localStorage&&(p==m?t.localStorage.setItem(s,m):t.localStorage.setItem(s,"ck"));var h=g("click_id"),_=g("utm_campaign"),y=g("gclid");l?l.gclid=g("gclid"):l={gclid:y},R(h,_,l)}function E(e){var o=JSON.stringify(e);t.btoa?J(p,t.btoa(o)):J(p,f.encode(o))}function N(e,o){try{var r=function(e){var o,r;o=t.atob?t.atob(e):f.decode(e);try{(r=JSON.parse(o))||(r=[])}catch(t){r=[]}return r}(o),n=r[r.length-1]||{};return n.utms!=e.utms||e.utmc&&e.utmc!=n.utmc?(r.length>=5&&r.shift(),r.push(e),E(r),!0):(n.ts=e.ts,n.utmd=e.utmd,n.utmc=e.utmc,r[r.length-1]=n,E(r),!0)}catch(t){I(t)}return!1}function O(t){if(!t)return!1;var e=function(t){var e=new Date,o={utms:h(t||g("utm_source")),ts:e.toJSON()},r=g("utm_campaign");r&&(o.utmc=h(r));var n=g("utm_medium");return n&&(o.utmd=h(n)),o.enc="yes",["utms","utmc","utmd"].forEach(function(t){o[t]&&(o[t]=encodeURIComponent(o[t]))}),o}(t),o=y(p);return o?N(e,o):(E([e]),!0)}function R(t,e,o){var u=g("utm_source"),s=y(c);(function(){try{var t=y(l);if(t&&!Number.isNaN(Number(t)))return((new Date).getTime()-Number(t))/1e3>20}catch(t){}return!0})()&&(u&&s!=u&&!e&&(e="__EMPTY__"),O(u)&&o&&o.cf_prb&&function(t){if(t&&t.tdomain){var e=g("click_id")||j(),o="https://"+t.tdomain+"/prbcl?click_id="+e+"&j="+y(p);fetch(o).then(function(t){}).catch(function(t){})}}(o),J(r,t),J(a,e),J(n,o.gclid||""),J(c,u),J(i,g("utm_medium")),A())}function J(o,r){if(_())t.sessionStorage&&r&&t.sessionStorage.setItem(o,r);else if(function(t,o){var r=new Date;r.setTime(r.getTime()+31536e6),o&&(e.cookie=t+"="+o+";path=/;expires="+r.toUTCString()+";domain="+d)}(o,r),t.localStorage&&r)try{t.localStorage.setItem(o,r)}catch(t){}}function j(){var t=y(r);return t||(y(o)||"")}function M(t,o){if(t){var r=e.createElement("script"),n=function(t){var e=[];return Object.keys(t).forEach(function(o){e.push(o+"="+encodeURIComponent(t[o]))}),e}(o),a=t+"?"+n.join("&");r.setAttribute("src",a),r.setAttribute("type","text/javascript"),r.setAttribute("async",!0),e.body.appendChild(r)}else console.log("[log.ERROR TrackierWebSDK] All required parameters (url) must be provided")}var U=function(){var o=null;function r(){}return r.prototype.init=function(t,e){D(t,e)},r.prototype.integrateGTMShopify=function(){if(!t.Shopify||!t.Shopify.analytics)return!1;var e=0,o=!1;setInterval(function(){if(o)return!1;if(t.dataLayer&&t.dataLayer.length>e){for(var r=e;r<t.dataLayer.length&&!o;r++){var n=t.dataLayer[r];"order-placed"===n.event&&(t.Shopify.analytics.publish("tr_shiprocket_purchase_event",n||{}),o=!0)}e=t.dataLayer.length}},200)},r.prototype.integrateGTMShopifyWithEventName=function(e=null){if(!t.Shopify||!t.Shopify.analytics||!e)return!1;let o=0,r=!1;setInterval(function(){if(r)return!1;if(t.dataLayer&&t.dataLayer.length>o){for(let n=o;n<t.dataLayer.length&&!r;n++){let o=t.dataLayer[n];if(o[1]&&o[1]===e){const e=o[2]||{};t.Shopify.analytics.publish("tr_custom_purchase_event",e),r=!0}}o=t.dataLayer.length}},200)},r.prototype.setClickPixelCb=function(t){t&&"function"==typeof t&&(o=t)},r.prototype.clickPixelCb=function(t){try{o&&"function"==typeof o&&o(t.click_id)}catch(t){}R(t.click_id,g("utm_campaign")||"trackier_",{})},r.prototype.hasSessionId=function(){var t=j();return t&&"string"==typeof t&&24===t.length},r.prototype.getTrackingToken=function(){return j()||""},r.prototype.getVersion=function(){return"6.6"},r.prototype.setIsNewUser=function(t){J(u,!0===t?"true":"false")},r.prototype.getShopifyCheckoutData=function(t,e){var o={};if("gokwik"==e||"gokwik_v2"==e)o={txn_id:t.customData.order_name,sale_amount:t.customData.total_price,sub1:t.customData.moid,sub10:"gokwik"},/^tmp_/.test(o.sub1)&&(o.sub1=""),t.customData.discount&&t.customData.discount.title&&(o.coupon_code=t.customData.discount.title);else if("shiprocket"==e){o={txn_id:(r=t.customData||{}).ecommerce?r.ecommerce.transaction_id:"",sale_amount:r.ecommerce&&r.ecommerce.value?r.ecommerce.value:0,sub10:"shiprocket"},r.ecommerce&&r.ecommerce.coupon&&(o.coupon_code=r.ecommerce.coupon)}else if("shiprocket_v2"==e){o={txn_id:(r=t.customData||{}).transaction_id||"",sale_amount:r.value||0,sub10:"shiprocket"},r.coupon&&(o.coupon_code=r.coupon)}else if("custom"==e){o={txn_id:(r=t.customData||{}).transaction_id||"",sale_amount:r.value||0,currency:r.currency||"",coupon_code:r.coupon||"",sub10:"custom"}}else if("razorpay"==e){var r;o={txn_id:(r=t.customData||{}).transaction_id||"",sale_amount:r.value||0,currency:r.currency||"",coupon_code:r.coupon||"",sub10:"razorpay"}}else o=this.getShopifyCheckoutEventData(t);return o},r.prototype.getShopifyCheckoutEventData=function(t){var e=t.data.checkout,o=e.order.id,r=e.totalPrice.amount,n=[],a=e.discountApplications;return a&&a.constructor===Array&&a.length>0&&a.forEach(function(t){!t||"discount_code"!==t.type&&"DISCOUNT_CODE"!=t.type&&"CODE"!=t.type&&"code"!=t.type||n.push(t.title)}),{sale_amount:r,txn_id:o,coupon_code:n[0]}},r.prototype.isNewUser=function(t){return"true"==y(u)},r.prototype.trackClick=function(t,o){!function(t){var o=e.createElement("script"),r=g("campaign_id"),n=g("pub_id"),a=g("fbclid"),c=g("gclid");if(r&&n){var i="https://"+t+"/click_pixel?campaign_id="+r+"&pub_id="+n;a&&(i+="&fbclid="+a),c&&(i+="&gclid="+c),["p1","p2","p3","p4","p5","p6","p7","p8","p9","p10","p11","p12","p13","p14","p15","source"].forEach(function(t){var e=g(t);e&&"string"==typeof e&&(i+="&"+t+"="+encodeURIComponent(e))}),i+="&callback=window.TrackierWebSDK.clickPixelCb",o.setAttribute("src",i),o.setAttribute("type","text/javascript"),o.setAttribute("async",!0),e.body.appendChild(o)}else D("")}(t)},r.prototype.trackConv=function(t,e,o){T(t,e,o),x(t,e,o)},r.prototype.trackConvForBrand=function(t,e,o){var r;(r=y(a)||"",/^trackier_/i.test(r))?(T(t,e,o),x(t,e,o)):x(t,e,o)},r.prototype.getUrlParam=function(t){return g(t)},r.prototype.sendPin=function(t,e){return M(t,e)},r}();t.TrackierWebSDK=new U}(window,window.document);
